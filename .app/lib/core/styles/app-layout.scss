@use "./../../../css/2-lib/breakpoints" as *;

.app-layout__sidebar {
  background-color: var(--color-backdrop);
  z-index: 2;
  display: none;

  &[data-open="true"] {
    display: block;
  }

  &[data-open="false"] {
    display: none;
  }

  .supports-js & {
    position: fixed;
    inset: 4rem 0 0;
  }
}

.app-layout__sidebar-inner {
  block-size: 100%;
  inline-size: 100%;
  position: relative;
  padding-block: var(--space-4);
  background-color: var(--color-surface);
  overscroll-behavior: contain;
  overflow: auto;

  :root.supports-js & {
    box-shadow: var(--shadow-xxl);
    max-inline-size: 400px;
  }
}

@include media-breakpoint-up("xl") {
  .app-layout__wrapper {
    display: grid;
    grid-template-columns: 300px minmax(0, 1fr);
  }

  .app-layout__sidebar {
    block-size: calc(100vh - 4rem);
    position: sticky !important;
    inset: 4rem 0 0;

    // Always respect data-open state, even at xl breakpoint
    &[data-open="false"] {
      display: none !important;
    }

    // Only show as block if explicitly open
    &[data-open="true"] {
      display: block !important;
    }
  }

  .app-layout__sidebar-inner {
    box-shadow: none !important;
  }
}
